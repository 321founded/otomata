{% extends "app/base.html" %}

{% block title %}Runs - Otomata{% endblock %}
{% block page_title %}Runs{% endblock %}

{% block content %}
<div class="bg-white rounded-xl border border-gray-200">
  <div class="px-6 py-4 border-b border-gray-200">
    <h2 class="font-semibold text-gray-900">Toutes les exécutions</h2>
  </div>

  <table class="w-full">
    <thead class="bg-gray-50 border-b border-gray-200">
      <tr>
        <th class="text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
        <th class="text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Workflow</th>
        <th class="text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
        <th class="text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Démarré</th>
        <th class="text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Durée</th>
        <th class="text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Items</th>
        <th class="text-right px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-100">
      {% for run in runs %}
      <tr class="hover:bg-gray-50">
        <td class="px-6 py-4">
          <a href="{% url 'backoffice:run_detail' run.id %}" class="font-medium text-sky-600 hover:text-sky-700">
            #{{ run.id }}
          </a>
        </td>
        <td class="px-6 py-4 font-medium text-gray-900">{{ run.workflow }}</td>
        <td class="px-6 py-4">
          <span class="px-2.5 py-1 rounded-full text-xs font-medium
            {% if run.status == 'completed' %}bg-emerald-100 text-emerald-700
            {% elif run.status == 'running' %}bg-sky-100 text-sky-700
            {% else %}bg-red-100 text-red-700{% endif %}">
            {{ run.status }}
          </span>
        </td>
        <td class="px-6 py-4 text-gray-500">{{ run.started }}</td>
        <td class="px-6 py-4 text-gray-500">{{ run.duration }}</td>
        <td class="px-6 py-4 text-gray-500">{{ run.items }}</td>
        <td class="px-6 py-4 text-right">
          <a href="{% url 'backoffice:run_detail' run.id %}" class="text-gray-400 hover:text-gray-600">
            <svg class="w-5 h-5 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
